box: wercker/nodejs
# Build definition
build:
  # The steps that will be executed on build
  steps:
    # A step that executes `npm install` command
    - npm-install
    - script:
        name: install npv
        code: npm install npv
deploy:
  steps:
     - script
        name: npm publish
        code: if [ $(./node_modules/npv/npv.js) != $(npm show $NPM_PACKAGE version) ]; then echo -e "init.author.name=Jan Nahody\ninit.author.email=jan.nahody@gmail.com\ninit.author.url=http://nahody.github.io/\n//registry.npmjs.org/:_password=$NPM_PASSWORD\n//registry.npmjs.org/:username=$NPM_USERNAME\n//registry.npmjs.org/:email=jan.nahody@gmail.com\n//registry.npmjs.org/:always-auth=false"  > ~/.npmrc; npm publish; fi